name: Automatic Dependency Updates

on:
  schedule:
    - cron: '0 0 * * *' # Her gün gece 12'de çalışır
  push:
    branches:
      - main # Ana dalda bir güncelleme olduğunda tetiklenir

jobs:
  update-npm-dependencies:
    runs-on: ubuntu-latest
    steps:
      - name: Check out code
        uses: actions/checkout@v2

      - name: Set up Node.js
        uses: actions/setup-node@v2
        with:
          node-version: '14' # İhtiyacınıza göre versiyonu ayarlayın

      - name: Configure npm registry
        run: |
          echo "//example.com/:_authToken=${{ secrets.NPM_TOKEN }}" >> ~/.npmrc

      - name: Install npm dependencies
        run: npm install

      - name: Update npm dependencies
        run: npm update

      - name: Lint and fix errors
        run: |
          npx eslint . --fix
          npx prettier --write .

      - name: Commit changes
        run: |
          git config --local user.name "github-actions"
          git config --local user.email "github-actions@users.noreply.github.com"
          git add .
          git commit -m "ci: automatic npm dependency updates" || echo "No changes to commit"

      - name: Push changes
        run: git push origin main
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}


  update-go-dependencies:
    runs-on: ubuntu-latest
    steps:
      - name: Check out code
        uses: actions/checkout@v2

      - name: Set up Go
        uses: actions/setup-go@v2
        with:
          go-version: '1.18' # İhtiyacınıza göre versiyonu ayarlayın

      - name: Install Go dependencies
        run: go mod tidy

      - name: Commit Go module updates
        run: |
          git config --local user.name "github-actions"
          git config --local user.email "github-actions@users.noreply.github.com"
          git add go.mod go.sum
          git commit -m "ci: automatic Go dependency updates" || echo "No changes to commit"

      - name: Push changes
        run: git push origin main
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

  
  update-python-dependencies:
    runs-on: ubuntu-latest
    steps:
      - name: Check out code
        uses: actions/checkout@v2

      - name: Set up Python
        uses: actions/setup-python@v2
        with:
          python-version: '3.8' # İhtiyacınıza göre versiyonu ayarlayın

      - name: Install Python dependencies
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt
          pip list --outdated --format=freeze > requirements.txt

      - name: Commit Python updates
        run: |
          git config --local user.name "github-actions"
          git config --local user.email "github-actions@users.noreply.github.com"
          git add requirements.txt
          git commit -m "ci: automatic Python dependency updates" || echo "No changes to commit"

      - name: Push changes
        run: git push origin main
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}


  update-ruby-dependencies:
    runs-on: ubuntu-latest
    steps:
      - name: Check out code
        uses: actions/checkout@v2

      - name: Set up Ruby
        uses: ruby/setup-ruby@v1
        with:
          ruby-version: '3.0' # İhtiyacınıza göre versiyonu ayarlayın

      - name: Install Ruby dependencies
        run: |
          bundle install
          bundle update

      - name: Commit Ruby updates
        run: |
          git config --local user.name "github-actions"
          git config --local user.email "github-actions@users.noreply.github.com"
          git add Gemfile Gemfile.lock
          git commit -m "ci: automatic Ruby dependency updates" || echo "No changes to commit"

      - name: Push changes
        run: git push origin main
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}


  update-java-dependencies:
    runs-on: ubuntu-latest
    steps:
      - name: Check out code
        uses: actions/checkout@v2

      - name: Set up JDK
        uses: actions/setup-java@v2
        with:
          java-version: '11' # İhtiyacınıza göre versiyonu ayarlayın
          distribution: 'adopt'

      - name: Install Java dependencies
        run: ./mvnw versions:use-latest-releases

      - name: Commit Java updates
        run: |
          git config --local user.name "github-actions"
          git config --local user.email "github-actions@users.noreply.github.com"
          git add .
          git commit -m "ci: automatic Java dependency updates" || echo "No changes to commit"

      - name: Push changes
        run: git push origin main
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}


  update-dotnet-dependencies:
    runs-on: ubuntu-latest
    steps:
      - name: Check out code
        uses: actions/checkout@v2

      - name: Set up .NET
        uses: actions/setup-dotnet@v1
        with:
          dotnet-version: '6.0' # İhtiyacınıza göre versiyonu ayarlayın

      - name: Restore and update .NET dependencies
        run: |
          dotnet restore
          dotnet outdated --include-transitive | dotnet outdated --include-transitive --update

      - name: Commit .NET updates
        run: |
          git config --local user.name "github-actions"
          git config --local user.email "github-actions@users.noreply.github.com"
          git add .
          git commit -m "ci: automatic .NET dependency updates" || echo "No changes to commit"

      - name: Push changes
        run: git push origin main
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
